!function(t,e){var n=t[e]={},i=function(t,e){for(var n in e)t[n]=e[n];return t},o=function(t){this.scope=t,this.status=0,this._thenFuns=[],this._args=[]};o.prototype={ok:function(t){return 1==this.status?t.apply(this.scope,this._args):this._thenFuns.push(t),this},all:function(t){var e=0,n=t.length,i=this;e==n&&i.setOk(t);for(var o=0;n>o;o++)t[o].ok(function(){e++,e==n&&i.setOk(t)});return this},setOk:function(){if(1!=this.status){this.status=1,this._args=Array.prototype.slice.call(arguments);for(var t;t=this._thenFuns.shift();)t.apply(this.scope,this._args)}return this}};var r=document.getElementsByTagName("head")[0]||document.documentElement,s=r.getElementsByTagName("script"),a=s[s.length-1],u=function(t){this.get="getModule",this.name=t,this.defineState=new o(this),this.readyState=new o(this),this.initState=new o(this)};u.prototype={init:function(){this.readyState.ok(function(){this.initState.status||(this.fun.call(t,m.context),this.initState.setOk())})},use:function(t){this.initState.ok(function(){t&&t()}),this.initState.status||this.readyState.ok(function(){for(var t,e=p.initStack(this.name);t=e.pop();)t.init()}),h.load(this.name)},define:function(t,e){this.dependencies=t,this.fun=e;var n=t.length;l[this.name]=1;for(var i=[],o=0;n>o;o++){var r=t[o];h.load(r),i.push(p[this.get](r).readyState)}this.readyState.all(i),this.defineState.setOk()}};var c=function(){u.apply(this,arguments),this.get="getPlugin",this.stop=!1};i(c.prototype,u.prototype),c.prototype.init=function(){this.readyState.ok(function(){this.initState.status||(this.fun.call(this,m),!this.stop&&this.initState.setOk())})},c.prototype.define=function(){u.prototype.define.apply(this,arguments),n.use(this.name)};var l={"./":1},f=function(t,e){var n=document.createElement("script");n.type="text/javascript",n.originSrc=t;var i=function(t){e&&e(n,t),n.parentNode.removeChild(n)};m.isOldIE?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechang=null,i(window.event))}:n.onload=i,n.src=t,r.insertBefore(n,s[0])},h={getPage:function(t,e){var n,i=m.getPagePolicy;for(n in i)if(new RegExp(n,"g").test(t))return void i[n](t,e);f(t,e)},load:function(t,e){var n=m.config.location,i=n[t]||t;return"./"==i?void(e&&e()):(i!=t||new RegExp("\\.\\w+$").test(i)||(i+=".js"),n[t]||(n[t]=i),void(l[t]?e&&e():(l[t]=1,this.getPage(i,function(){e&&e()}))))}},d={},p={getModule:function(t){return d[t]=d[t]||new u(t)},getPlugin:function(t){return d[t]=d[t]||new c(t)},initStack:function(t,e,n){var o=e||{},r=n||[],s=d[t];if(!s||o[t]){var a=s?"no "+t:"circular dependency.";throw new Error("wrong dependencies :"+a)}o[t]=1,r.push(s);for(var u=arguments.callee,c=s.dependencies,l=0;l<c.length;l++)u(c[l],i({},o),r);return r}},m={config:{plugin:[],location:{}},getPagePolicy:{},StateAction:o,windowLoadState:new o,isOldIE:/msie [678]/g.test(navigator.userAgent.toLowerCase()),global:t,context:{},getJs:f,moduleMap:d,moduleFactory:p,moduleLoader:h,head:r,currentScript:a,afterConfig:new o},g=function(){m.windowLoadState.setOk()};window.addEventListener&&window.addEventListener("load",g)||window.attachEvent&&window.attachEvent("onload",g);var v=m.allPluginInitState=new o;n.define=function(t,e,n){v.ok(function(){p.getModule(t).define(e,n)})},n.plugin=function(t,e,n){p.getPlugin(t).define(e,n)},n.use=function(t,e){p.getModule(t).use(e)},n.config=function(t){t=t||{},t.plugin=(t.plugin||[]).concat(m.config.plugin),t.location=i(t.location||{},m.config.location),t=i(m.config,t);for(var e=[],n=0;n<t.plugin.length;n++){var o=p.getPlugin(t.plugin[n]);e.push(o.initState),o.use()}v.all(e),m.afterConfig.setOk()},n._init=function(t){t&&t(m);var e=a.getAttribute("data-config");e&&h.load(e)}}(this,"Niman"),function(t){var e=t.Niman;e.plugin("supports",[],function(t){function n(t){var e="function"==typeof window.Event&&t instanceof window.Event;return!e&&t.hasOwnProperty&&t.hasOwnProperty("toString")}Array.prototype.forEach=Array.prototype.forEach||function(t){for(var e=0;e<this.length;e++)t(this[e],e,this)};var i=t.supports={hasOrDo:function(e,n,o,r){i.has(t.config.plugin,e)?t.moduleFactory.getPlugin(e).initState.ok(function(){o&&o.apply(n,arguments)}):r&&r.apply(n,arguments)},useOrDo:function(n,i,o,r){t.config.location[n]?e.Module.use(n,function(){o&&o.apply(i,arguments)}):r&&r.apply(i,arguments)},getId:function(t,e){var n=null;return i.forEach(t,function(t,i){return i===e&&(n=t),!(i===e)}),n},has:function(t,e){var n=i.getId(t,e);return!(null===n)},forEach:function(t,e){var o=i.typeOf(t);if("Array"==o)for(var r=0;r<t.length&&!1!==e(r,t[r]);r++);else if("Object"==o){if(n(t)&&!1===e("toString",t.toString))return;for(var s in t)if(!1===e(s,t[s]))break}},toArr:function(t){return Array.prototype.slice.call(t)},mix:function(){var t=i.toArr(arguments),e=t.shift();return i.forEach(t,function(t,i){for(var o in i)e[o]=i[o];n(i)&&(e.toString=i.toString)}),e},typeOf:function(t){if("undefined"==typeof t)return"Undefined";for(var e=[window,document,null],n=["Window","Document","Null"],i=0;3>i;i++)if(e[i]===t)return n[i];var o=Object.prototype.toString.call(t).slice(8,-1);return navigator&&"Microsoft Internet Explorer"==navigator.appName&&"Object"==o&&t&&(t.nodeName&&1==t.nodeType&&(o="HTML"+t.tagName+"Element"),t.nodeValue&&(o="Text")),o}}})}(this),function(ctx){var Niman=ctx.Niman;Niman.plugin("definition",["supports"],function(info){var config=info.config,supports=(Niman.Module,info.moduleFactory,info.supports),typeOf=supports.typeOf,StateAction=info.StateAction,currentModuleInfo=[],buildAmdCallback=function(t,e,n){return function(i){var o=[];supports.forEach(e,function(t,e){o.push(i[e])}),i[t]=n.apply(null,o)}},buildDataCallback=function(t,e,n){return function(e){e[t]=n}},require=function(t){return info.context[t]};require.async=function(t,e){for(var n=new StateAction,i=[],o=0;o<t.length;o++){var r=t[o],s=new StateAction;Niman.use(r,function(t){return function(){t.setOk()}}(s)),i.push(s)}n.all(i).ok(function(){for(var n=[],i=0;i<t.length;i++)n.push(info.context[t[i]]);e&&e.apply(null,n)})};var buildCommonJsCallback=function(t,e,n){return function(e){var i={exports:{}},o=n.apply(null,[require,i.exports,i]);e[t]=o||i.exports}},REQUIRE_REG=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,getdependencies=function(t){var e=t.toString(),n=[],i={};e.replace(/\\\\/g,"").replace(REQUIRE_REG,function(t,e,n){n&&(i[n]=1)});for(var o in i)n.push(o);return n},buildCallBackMap={amd:buildAmdCallback,commonJs:buildCommonJsCallback,cmd:buildCommonJsCallback,data:buildDataCallback};info.getPagePolicy["\\.js$"]=function(t,e){var n=function(n,i){var o=currentModuleInfo.shift();if(o){var r=o.name||supports.getId(config.location,n.originSrc)||n.originSrc,s=o.type,a=o.dependencies,u=o.fun;info.afterCommonJsDefine&&info.afterCommonJsDefine(r,a,u,t),Niman.define(r,a,buildCallBackMap[s](r,a,u))}e&&e(n,i)};info.getJs.apply(info,[t,n])};var commonJs=function(t){return{type:"commonJs",dependencies:getdependencies(t),fun:t}},definitionFormatter={FunctionUndefinedUndefined:commonJs,StringFunctionUndefined:function(t,e){var n=commonJs(e);return n.name=t,n},ArrayFunctionUndefined:function(t,e){return{type:"amd",dependencies:t,fun:e}},ObjectUndefinedUndefined:function(t){return{type:"data",dependencies:[],fun:t}},StringArrayFunction:function(t,e,n){var i=getdependencies(n),o=!1;if(i.length==e.length){o=!0;for(var r=0;r<e.length;r++)if(!supports.has(i,e[r])||!supports.has(e,i[r])){o=!1;break}}var s={name:t,dependencies:e};return s.type=info.config.cmdOnly?"cmd":o?"cmd":"amd",s}},define=info.global.define=function(name,dependencies,fun){var infoFormatter=definitionFormatter[typeOf(name)+typeOf(dependencies)+typeOf(fun)],moduleInfo=infoFormatter&&infoFormatter(name,dependencies,fun)||{};if(moduleInfo.name)with(moduleInfo)Niman.define(name,dependencies,buildCallBackMap[type](name,dependencies,fun));else currentModuleInfo.push(moduleInfo)};info.global.require=function(t){Niman.use(t)},define.cmd={},define.require=info.global.require})}(this),function(t){var e=t.Niman;e.plugin("application",["supports"],function(t){function n(t){var e=/msie/g.test(navigator.userAgent.toLowerCase());!e&&document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",t,!1)},!1):document.documentElement.doScroll&&window==window.top&&function(){try{document.documentElement.doScroll("left"),t()}catch(e){return void setTimeout(arguments.callee,0)}}()}function i(){u.setOk()}for(var o=t.moduleFactory,r=t.config.plugin,s=[],a=0;a<r.length;a++)s.push(o.getPlugin(r[a]).initState);var u=new t.StateAction;t.readyState=u,t.windowLoadState.ok(i),n(i);var c=[u],l=new t.StateAction;t.allPluginInitState.ok(function(){var n=t.currentScript.getAttribute("data-main")||t.config.main;t.config.main=n;for(var i=t.config.preload||(t.config.preload=[]),r=0;r<i.length;r++){var s=i[r],a=o.getModule(s);c.push(a.initState),e.use(s)}l.all(c).ok(function(){n&&e.use(n)})})})}(this),function(t){t.Niman._init(function(t){t.config.plugin=["supports","definition","application"],t.config.cmdOnly=!0})}(this),function(t){function e(t,e,n,i){var o,r,s,a,u,c,f,d,p,m;if((e?e.ownerDocument||e:q)!==k&&D(e),e=e||k,n=n||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!i&&L){if(11!==a&&(o=ve.exec(t)))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&X(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&x.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(s)),n}if(x.qsa&&(!O||!O.test(t))){if(d=f=j,p=e,m=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=N(t),(f=e.getAttribute("id"))?d=f.replace(we,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",u=c.length;u--;)c[u]=d+h(c[u]);p=ye.test(t)&&l(e.parentNode)||e,m=c.join(",")}if(m)try{return Z.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{f||e.removeAttribute("id")}}}return A(t.replace(ae,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>E.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[j]=!0,t}function o(t){var e=k.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)E.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||V)-(~t.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function l(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function f(){}function h(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=U++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,u,c=[H,r];if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(u=e[j]||(e[j]={}),(a=u[i])&&a[0]===H&&a[1]===r)return c[2]=a[2];if(u[i]=c,c[2]=t(e,n,s))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function g(t,e,n,i,o){for(var r,s=[],a=0,u=t.length,c=null!=e;u>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),c&&e.push(a));return s}function v(t,e,n,o,r,s){return o&&!o[j]&&(o=v(o)),r&&!r[j]&&(r=v(r,s)),i(function(i,s,a,u){var c,l,f,h=[],d=[],p=s.length,v=i||m(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?v:g(v,h,t,a,u),w=n?r||(i?t:p||o)?[]:s:y;if(n&&n(y,w,a,u),o)for(c=g(w,d),o(c,[],a,u),l=c.length;l--;)(f=c[l])&&(w[d[l]]=!(y[d[l]]=f));if(i){if(r||t){if(r){for(c=[],l=w.length;l--;)(f=w[l])&&c.push(y[l]=f);r(null,w=[],c,u)}for(l=w.length;l--;)(f=w[l])&&(c=r?te(i,f):h[l])>-1&&(i[c]=!(s[c]=f))}}else w=g(w===s?w.splice(p,w.length):w),r?r(null,s,w,u):Z.apply(s,w)})}function y(t){for(var e,n,i,o=t.length,r=E.relative[t[0].type],s=r||E.relative[" "],a=r?1:0,u=d(function(t){return t===e},s,!0),c=d(function(t){return te(e,t)>-1},s,!0),l=[function(t,n,i){return!r&&(i||n!==M)||((e=n).nodeType?u(t,n,i):c(t,n,i))}];o>a;a++)if(n=E.relative[t[a].type])l=[d(p(l),n)];else{if(n=E.filter[t[a].type].apply(null,t[a].matches),n[j]){for(i=++a;o>i&&!E.relative[t[i].type];i++);return v(a>1&&p(l),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ae,"$1"),n,i>a&&y(t.slice(a,i)),o>i&&y(t=t.slice(i)),o>i&&h(t))}l.push(n)}return p(l)}function w(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,u,c){var l,f,h,d=0,p="0",m=i&&[],v=[],y=M,w=i||r&&E.find.TAG("*",c),_=H+=null==y?1:Math.random()||.1,x=w.length;for(c&&(M=s!==k&&s);p!==x&&null!=(l=w[p]);p++){if(r&&l){for(f=0;h=t[f++];)if(h(l,s,a)){u.push(l);break}c&&(H=_)}o&&((l=!h&&l)&&d--,i&&m.push(l))}if(d+=p,o&&p!==d){for(f=0;h=n[f++];)h(m,v,s,a);if(i){if(d>0)for(;p--;)m[p]||v[p]||(v[p]=G.call(u));v=g(v)}Z.apply(u,v),c&&!i&&v.length>0&&d+n.length>1&&e.uniqueSort(u)}return c&&(H=_,M=y),m};return o?i(s):s}var _,x,E,b,T,N,S,A,M,P,C,D,k,I,L,O,R,$,X,j="sizzle"+1*new Date,q=t.document,H=0,U=0,z=n(),F=n(),Y=n(),B=function(t,e){return t===e&&(C=!0),0},V=1<<31,W={}.hasOwnProperty,J=[],G=J.pop,Q=J.push,Z=J.push,K=J.slice,te=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",re=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(re),he=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(J=K.call(q.childNodes),q.childNodes),J[q.childNodes.length].nodeType}catch(Ee){Z={apply:J.length?function(t,e){Q.apply(t,K.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}x=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:q,i=n.defaultView;return n!==k&&9===n.nodeType&&n.documentElement?(k=n,I=n.documentElement,L=!T(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){D()},!1):i.attachEvent&&i.attachEvent("onunload",function(){D()})),x.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=ge.test(n.getElementsByClassName),x.getById=o(function(t){return I.appendChild(t).id=j,!n.getElementsByName||!n.getElementsByName(j).length}),x.getById?(E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},E.filter.ID=function(t){var e=t.replace(_e,xe);return function(t){return t.getAttribute("id")===e}}):(delete E.find.ID,E.filter.ID=function(t){var e=t.replace(_e,xe);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),E.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},E.find.CLASS=x.getElementsByClassName&&function(t,e){return L?e.getElementsByClassName(t):void 0},R=[],O=[],(x.qsa=ge.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select msallowcapture=''><option id='d\f]' selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~=d]").length||O.push("~="),t.querySelectorAll(":checked").length||O.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(x.matchesSelector=ge.test($=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&o(function(t){x.disconnectedMatch=$.call(t,"div"),$.call(t,"[s!='']:x"),R.push("!=",re)}),O=O.length&&new RegExp(O.join("|")),R=R.length&&new RegExp(R.join("|")),e=ge.test(I.compareDocumentPosition),X=e||ge.test(I.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},B=e?function(t,e){if(t===e)return C=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!x.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===q&&X(q,t)?-1:e===n||e.ownerDocument===q&&X(q,e)?1:P?te(P,t)-te(P,e):0:4&i?-1:1)}:function(t,e){if(t===e)return C=!0,0;var i,o=0,r=t.parentNode,a=e.parentNode,u=[t],c=[e];if(!r||!a)return t===n?-1:e===n?1:r?-1:a?1:P?te(P,t)-te(P,e):0;if(r===a)return s(t,e);for(i=t;i=i.parentNode;)u.unshift(i);for(i=e;i=i.parentNode;)c.unshift(i);for(;u[o]===c[o];)o++;return o?s(u[o],c[o]):u[o]===q?-1:c[o]===q?1:0},n):k},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==k&&D(t),n=n.replace(le,"='$1']"),!(!x.matchesSelector||!L||R&&R.test(n)||O&&O.test(n)))try{var i=$.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,k,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==k&&D(t),X(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==k&&D(t);var n=E.attrHandle[e.toLowerCase()],i=n&&W.call(E.attrHandle,e.toLowerCase())?n(t,e,!L):void 0;return void 0!==i?i:x.attributes||!L?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(C=!x.detectDuplicates,P=!x.sortStable&&t.slice(0),t.sort(B),C){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return P=null,t},b=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=b(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=b(e);return n},E=e.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_e,xe),t[3]=(t[3]||t[4]||t[5]||"").replace(_e,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return de.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&fe.test(n)&&(e=N(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_e,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(se," ")+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,u){var c,l,f,h,d,p,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!u&&!a;if(g){if(r){for(;m;){for(f=e;f=f[m];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(l=g[j]||(g[j]={}),c=l[t]||[],d=c[0]===H&&c[1],h=c[0]===H&&c[2],f=d&&g.childNodes[d];f=++d&&f&&f[m]||(h=d=0)||p.pop();)if(1===f.nodeType&&++h&&f===e){l[t]=[H,d,h];break}}else if(y&&(c=(e[j]||(e[j]={}))[t])&&c[0]===H)h=c[1];else for(;(f=++d&&f&&f[m]||(h=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++h||(y&&((f[j]||(f[j]={}))[t]=[H,h]),f!==e)););return h-=o,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(t,n){var o,r=E.pseudos[t]||E.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[j]?r(n):r.length>1?(o=[t,t,"",n],E.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=te(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=S(t.replace(ae,"$1"));return o[j]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(_e,xe),function(e){return(e.textContent||e.innerText||b(e)).indexOf(t)>-1}}),lang:i(function(t){return he.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_e,xe).toLowerCase(),function(e){var n;do if(n=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return pe.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},E.pseudos.nth=E.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})E.pseudos[_]=u(_);f.prototype=E.filters=E.pseudos,E.setFilters=new f,N=e.tokenize=function(t,n){var i,o,r,s,a,u,c,l=F[t+" "];if(l)return n?0:l.slice(0);for(a=t,u=[],c=E.preFilter;a;){(!i||(o=ue.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),u.push(r=[])),i=!1,(o=ce.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(ae," ")}),a=a.slice(i.length));for(s in E.filter)!(o=de[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):F(t,u).slice(0)},S=e.compile=function(t,e){var n,i=[],o=[],r=Y[t+" "];if(!r){for(e||(e=N(t)),n=e.length;n--;)r=y(e[n]),r[j]?i.push(r):o.push(r);r=Y(t,w(o,i)),r.selector=t}return r},A=e.select=function(t,e,n,i){var o,r,s,a,u,c="function"==typeof t&&t,f=!i&&N(t=c.selector||t);if(n=n||[],1===f.length){if(r=f[0]=f[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&x.getById&&9===e.nodeType&&L&&E.relative[r[1].type]){if(e=(E.find.ID(s.matches[0].replace(_e,xe),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=de.needsContext.test(t)?0:r.length;o--&&(s=r[o],!E.relative[a=s.type]);)if((u=E.find[a])&&(i=u(s.matches[0].replace(_e,xe),ye.test(r[0].type)&&l(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&h(r),!t)return Z.apply(n,i),n;break}}return(c||S(t,f))(i,e,!L,n,ye.test(t)&&l(e.parentNode)||e),n},x.sortStable=j.split("").sort(B).join("")===j,x.detectDuplicates=!!C,D(),x.sortDetached=o(function(t){return 1&t.compareDocumentPosition(k.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ee,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),"function"==typeof define&&define.cmd&&define.amd?define("Sizzle",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.Sizzle=e}(window),function(t){function e(t,e){e.prototype._observeElement=function(e,n,i){t.listen(e).on(n,e,i)},e.prototype._stopObserveElement=function(e,n,i){t.listen(e).un(n,e,i)}}function n(t,e){e.prototype._observeElement=function(e,n,i){t.listen(e).on(n,e,i)},e.prototype._stopObserveElement=function(e,n,i){t.listen(e).un(n,e,i)}}function i(t){!r&&Promise&&t&&!t.hasPromise&&(r=!0,t.setPromise(Promise))}function o(t){!s&&Promise&&t&&!t.Emitter.prototype.call&&(s=!0,t.Emitter.setPromise(Promise))}var r=!1,s=!1,a=function(t){var r=t.NViewModel,s=t.NPromise,a=t.NEvents,u=t.NDomQuery,c=t.Sizzle,l=t.NUtils,f=t.NAjax,h={};return a&&r&&e(a,r),a&&u&&n(a,u),c&&u&&u.setSizzle(c),f&&(Promise||s)&&i(f),l&&(Promise||s)&&o(l),h};Niman&&Niman.plugin&&Niman.define?Niman.plugin("NCombinationPlugin",["supports","definition","application"],function(t){for(var n,r=["NViewModel","NPromise","NEvents","NDomQuery","NAjax","Sizzle","NUtils"],s={},a=0;a<r.length;a++)n=r[a],s[n]=t.moduleFactory.getModule(n).defineState;var u=t.StateAction,c=t.context;(new u).all([s.NEvents,s.NViewModel]).ok(function(){Niman.use("NEvents",function(){Niman.use("NViewModel",function(){e(c.NEvents,c.NViewModel)})})}),(new u).all([s.NEvents,s.NDomQuery]).ok(function(){Niman.use("NEvents",function(){Niman.use("NDomQuery",function(){e(c.NEvents,c.NDomQuery)})})}),(new u).all([s.NDomQuery,s.Sizzle]).ok(function(){Niman.use("NDomQuery",function(){Niman.use("Sizzle",function(){c.NDomQuery.setSizzle(c.Sizzle)})})}),s.NAjax.ok(function(){Niman.use("NAjax",function(){i(c.NAjax)})}),s.NUtils.ok(function(){Niman.use("NUtils",function(){o(c.NUtils)})}),s.NPromise.ok(function(){Niman.use("NPromise",function(){i(c.NAjax),o(c.NUtils)})})}):"function"==typeof define&&define.cmd?define("NCombinationPlugin",[],function(t,e,n){n.exports=a}):a({NViewModel:t.NimanViewModel,NPromise:t.NimanPromise,NEvents:t.NimanEvents,NDomQuery:t.NimanDomQuery,Sizzle:t.Sizzle,NUtils:t.NimanUtils,NAjax:t.NimanAjax})}(this),Niman.plugin("Text",["supports"],function(t){var e=t.moduleLoader,n=(e.getPage,t.supports),i=function(t){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)for(var n=["Microsoft.XMLHTTP","MSXML.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.7.0","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],i=0;i<n.length;i++)try{if(e=new ActiveXObject(n[i]))break}catch(o){}return e?(e.onreadystatechange=function(){4==e.readyState&&200==e.status&&t&&t(e.responseText)},e):void 0};t.getPagePolicy["\\.tpl|\\.htm$|\\.html$|\\.template$|\\.txt$"]=function(e,o){var r=n.getId(t.config.location,e),s=i(function(e){t.moduleFactory.getModule(r).define([],function(t){t[r]=e}),o&&o()});s.open("GET",e,!0),s.send(null)}}),Niman.plugin("CSS",["supports"],function(info){var moduleLoader=info.moduleLoader,supports=(moduleLoader.getPage,info.supports),oldLoad=moduleLoader.load;moduleLoader.load=function(t,e){var n=info.config.location[t]||t;oldLoad.apply(this,arguments),new RegExp("\\.css$","g").test(n)&&info.moduleFactory.getModule(t).define([],function(){e&&e()})},info.getPagePolicy["\\.css$"]=function(url,callback){var link=(supports.getId(info.config.location,url),document.createElement("link"));with(link)rel="stylesheet",rev="stylesheet",type="text/css",media="screen",href=url;info.head.appendChild(link)}}),function(t){var e=function(){var t={};return t.set=function(t,e){var n=arguments,i=arguments.length,o=i>2?n[2]:null,r=i>3?n[3]:"/",s=i>4?n[4]:null,a=i>5?n[5]:!1;document.cookie=t+"="+escape(e)+(null==o?"":"; expires="+o.toGMTString())+(null==r?"":"; path="+r)+(null==s?"":"; domain="+s)+(1==a?"; secure":"")},t.get=function(e){for(var n=e+"=",i=n.length,o=document.cookie.length,r=0,s=0;o>r;){if(s=r+i,document.cookie.substring(r,s)==n)return t.getCookieVal(s);if(r=document.cookie.indexOf(" ",r)+1,0==r)break}return null},t.clear=function(e){t.get(e)&&t.set(e,"",new Date(0))},t.getCookieVal=function(t){var e=document.cookie.indexOf(";",t);return-1==e&&(e=document.cookie.length),unescape(document.cookie.substring(t,e))},t}();"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.cmd?define("NCookies",[],function(t,n,i){i.exports=e}):t.NimanCookies=e}(this),function(t){function e(t){return o.preventDefault(t),!1}function n(t){this.info={downXY:{}},this.touchmoved=!1,this.core=t,this.init()}var i={},o={handler:{}};o.POSITION_EVENTS=["gesturestart","gesturechange","gestureend","touchstart","touchmove","touchend","mousedown","mouseover","mousemove","mouseup","click","dblclick","contextmenu","mousewheel","DOMMouseScroll"],o.BROWSER_EVENTS=["orientationchange","drop","dragleave","dragenter","dragover","dragend","dragstart","drag","load","change","focus","scroll","blur","resize","error","keypress","keydown","keyup"].concat(o.POSITION_EVENTS),o.handler.Mouse=n,n.prototype={interval:300,mouseEventOn:400,deviation:5,name:"Mouse",clickOnPushDown:!1,init:function(){this._listenMouse(!0),this._listenTouch(!0),this.core.on("DOMMouseScroll",this,this._wheel)
},_listenMouse:function(t){var e=this.core,n="un";t&&(this._listenMouse(!1),n="on"),e[n]("contextmenu",this,this._rightclick),e[n]("mousewheel",this,this._wheel),e[n]("mousedown",this,this._mousedown),e[n]("mousemove",this,this._mousemove),e[n]("mouseup",this,this._mouseup)},_listenTouch:function(t){var e=this.core,n="un";t&&(this._listenTouch(!1),n="on"),e[n]("touchstart",this,this._touchstart),e[n]("touchmove",this,this._touchmove),e[n]("touchend",this,this._touchend)},_wheel:function(t){var e=this.core;t.wheelStep=t.wheelDelta?t.wheelDelta/120:-t.detail/3,t.wheelStep>0?e.emit("$wheelup",t):e.emit("$wheeldown",t),e.emit("$wheel",t)},_rightclick:function(t){this.core.emit("$right",t)},_down:function(t){var e=this.info;return e.hasClick=!1,e.hasDown=u(t),e.hasMove=!1,this.clickOnPushDown&&(e.hasClick=!0,this.core.emit("$click",t)),this.core.emit("$down",t),!1},_mousedown:function(t){this._listenTouch(!1),this.info.downXY={x:t.clientX,y:t.clientY},this._down(t)},_mousemove:function(t){this._move(t,{x:t.clientX,y:t.clientY})},_mouseup:function(t){this._listenTouch(!0),this._up(t,{x:t.clientX,y:t.clientY})},_touchstart:function(t){this._listenMouse(!1);var e=t.targetTouches;this.info.downXY={x:e[0].clientX,y:e[0].clientY},this._down(t)},_touchmove:function(t){var e=t.targetTouches;this._move(t,{x:e[0].clientX,y:e[0].clientY})},_touchend:function(t){var e=this;clearTimeout(this.info.timeoutId),this.info.timeoutId=setTimeout(function(){e._listenMouse(!0)},this.mouseEventOn);t.targetTouches;this._up(t)},_move:function(t,e){var n=this.info;n.hasDown&&(n.hasMove||(n.hasMove=Math.abs(n.downXY.x-e.x)>this.deviation||Math.abs(n.downXY.y-e.y)>this.deviation,n.hasMove&&this.core.emit("$movestart",t)),n.hasMove&&(this.core.emit("$move",t),n.inTiming&&this._clearTimeout()))},_clearTimeout:function(t){var e=this.info;clearTimeout(e.inTiming),e.inTiming=!1,t||2==this.clickButtion||this.core.emit("$lagclick",e._lagevt),this.clickButtion=-1},_up:function(t){var e=u(t),n=this.info;if(this.core.emit("$up",t),n.hasMove||n.hasDown!=e)return void(n.hasDown=!1);this.clickOnPushDown||n.hasClick||(n.hasClick=!0,this.core.emit("$click",t)),n.hasDown=!1;var i=((new Date).getTime(),this);if(n.inTiming)this.clickButtion==t.button?(2==this.clickButtion?this.core.emit("$dbrclick",t):this.core.emit("$dblclick",t),i._clearTimeout(!0)):i._clearTimeout();else{var o=this.info._lagevt={sims:!0};for(var r in t)o[r]=t[r];n.inTiming=setTimeout(function(){i._clearTimeout()},this.interval),this.clickButtion=t.button}},destroy:function(){this._listenMouse(!1),this._listenTouch(!1),this.core.un("DOMMouseScroll",this,this._wheel)}};var r=0;o.useMouseHandler=!0;var s=o.Events=function(){this.emitterMap={},this.contextInfo={},this.listenerList=[],this.id=r++,i[this.id]=this,o.useMouseHandler&&(this.mouse=new n(this))};s.prototype={_get:function(t){return this.emitterMap[t]=this.emitterMap[t]||[]},destroy:function(){this.emitterMap=null;for(var t;t=this.listenerList.shift();)o.stopObserveElement(this.bindedElement,t.name,t.fun);this.listenerList=null,this.bindedElement=null,this.mouse&&this.mouse.destroy(),delete i[this.id]},on:function(t,e,n,i){var o=this._get(t);return o.push({evtName:t,scope:e,fun:n,once:i}),this},un:function(t,e,n){for(var i=this._get(t),o=0;o<i.length;o++){var r=i[o];r.scope==e&&r.fun==n&&i.splice(o,1)}return this},emit:function(t){for(var e=Array.prototype.slice.call(arguments),t=e.shift(),n=this._get(t),i=[],o=0;o<n.length;o++){var r=n[o],s=r.fun.apply(r.scope,e);if(r.once&&i.push(r),!1===s)break}for(var o=0;o<i.length;o++){var r=i[o];this.un(r.evtName,r.scope,r.fun)}return this},stopEvent:!1,cancelDefault:function(t){this.bindedElement["on"+t]=e}};var a=function(t,e){return"keypress"==e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||t.attachEvent)?"keydown":e};o.observeElement=function(t,e,n,i){i=i||!1,e=a(t,e),t.addEventListener?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)},o.stopObserveElement=function(t,e,n,i){e=a(t,e),t.removeEventListener&&t.removeEventListener(e,n,i),t.detachEvent&&t.detachEvent("on"+e,n)},o.stopEvent=function(t){try{t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}catch(e){}},o.preventDefault=function(t){try{t.returnValue=!1,t.preventDefault&&t.preventDefault()}catch(e){}},o.findElement=function(t,e,n){for(;t.parentNode;){if(e(t))return t;if(n==t)return null;t=t.parentNode}return null};var u=o.getSrcElement=function(t){return t.srcElement||t.target},c=o.positionInfo=function(t){t.xy={x:t.clientX,y:t.clientY},t.wheelStep=t.wheelDelta?t.wheelDelta/120:-t.detail/3};o.destroy=function(t){var e=i[t.event_id];e&&e.destroy()};var l=function(e,n){return function(i){i=i||t.event,i.manager={eventName:e,event:n,element:n.bindedElement,src:u(i)},n.stopEvent&&o.stopEvent(i),n.emit(e,i)}};o.listen=function(e,n){"string"==typeof e&&(e=t.document.getElementById(e));var r=i[e.event_id],s=o.BROWSER_EVENTS;if(!r){r=new o.Events,r.bindedElement=e,e.event_id=r.id;for(var a=0;a<s.length;a++){var u=l(s[a],r);r.listenerList.push({name:s[a],fun:u}),o.observeElement(e,s[a],u)}for(var a=0;a<o.POSITION_EVENTS.length;a++)r.on(o.POSITION_EVENTS[a],r,c)}return r.stopEvent=n,r},"function"==typeof require&&"object"==typeof o&&"object"==typeof module?module.exports=o:"function"==typeof define&&define.cmd?define("NEvents",[],function(t,e,n){n.exports=o}):t.NimanEvents=o}(this),function(t){function e(e){var n=this;"string"==typeof e&&(e=document.getElementById(e)),n.container=e,e.style.overflow="hidden",""==e.style.position&&(e.style.position="relative"),n.page1=document.createElement("div"),n._initStyle(n.page1.style),n.page2=document.createElement("div"),n._initStyle(n.page2.style),n.page2.style.left="100%",n.routeMap={},n.currentInfo={},n.animation=new f,n._onHashChange=function(){if(!n.shadowRouter){var t=n.getRouteUrl();n.route(t,null,0)}},d(t,"hashchange",n._onHashChange)}var n=!1,i=t.navigator;if(i){var o=i.userAgent.toLowerCase();n=/msie [6789]/g.test(o)}var r,s=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1)}}(),a=function(){return t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),u={},c=0,l=function(){var t;for(var e in u)t=u[e]();s(l)},f=function(t){t&&this.setCallback(t)};f.prototype={start:function(){0==c&&(r=s(l)),this.callback&&!this.running&&(c++,u[c]=this.callback,this.index=c,this.running=!0)},running:!1,stop:function(){this.running&&(c--,delete u[this.index],this.running=!1),0==c&&a(r)},setCallback:function(t){this.callback=t}};var h=function(t){this.scope=t,this.status=0,this._thenFuns=[],this._args=[]};h.prototype={ok:function(t){return 1==this.status?t.apply(this.scope,this._args):this._thenFuns.push(t),this},setOk:function(){if(1!=this.status){this.status=1,this._args=Array.prototype.slice.call(arguments);for(var t;t=this._thenFuns.shift();)t.apply(this.scope,this._args)}return this}};var d=(t.location.href,function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,n)}),p=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n),t.detachEvent&&t.detachEvent("on"+e,n)},m=function(t){return null==t||"undefined"==typeof t},g=function(){};e.prototype={defaultTranslateTime:300,useTransition:!0,shadowRouter:!1,_initStyle:function(t){t.position="absolute",t.left="0%",t.top="0%",t.width="100%",t.height="100%",t.overflow="hidden"},onHash:function(e){p(t,"hashchange",self._onHashChange),d(t,"hashchange",e)},setDefaultUrl:function(t){this.currentInfo.defaultUrl=t},getRouteUrl:function(){return t.location.hash.replace("#","")},addRouteMap:function(t,e){this.currentInfo.defaultUrl||(this.currentInfo.defaultUrl=t),e.matchUrl=t,e.firstAppend=e.firstAppend||g,e.afterAppend=e.afterAppend||g,e.firstShow=e.firstShow||g,e.afterShow=e.afterShow||g,e.beforeRemove=e.beforeRemove||g,e.translateTime="undefined"!=typeof e.translateTime?e.translateTime:this.defaultTranslateTime,this.routeMap[t]=e},_animationTransform:function(t){var e,n=t.translateTime,i=t.thisPage,o=t.nextPage,r=t.transformStyle,s=t.thisPageToValue,a=t.nextPageFromValue,u=t.nextPageToValue,c=this,l="-100%"==a?"-":"",f="-100%"==s?"-":"",h="100%"==a||"-100%"==a;if(0==n)return i.style[r]=s,void(o.style[r]=u);var d=100/n;c.animation.setCallback(function(){var t=(new Date).getTime()-e;t>=n&&(i.style[r]=s,o.style[r]=u,c.animation.stop());var a=d*t;a>100?a=100:0>a&&(a=0),o.style[r]=h?l+(100-a)+"%":a+"%",i.style[r]=f+a+"%"}),e=(new Date).getTime(),c.animation.start()},changePage:function(){},transform:function(t,e,i,o){var r="-100%",s="100%",a=new RegExp("left|right").test(o)?"left":"top",u=new RegExp("left|right").test(o)?"top":"left";a==o&&(r="100%",s="-100%");var c=function(){e.style[a]=s,e.style[u]="0%"};a&&this.useTransition&&!n?(e.style.transition=a+" 0ms",t.style.transform="translateZ(0px)",c(),setTimeout(function(){t.style.transition=a+" "+i+"ms",e.style.transition=a+" "+i+"ms",t.style[a]=r,e.style[a]="0%"},1)):a&&(c(),this._animationTransform({translateTime:i,thisPage:t,nextPage:e,transformStyle:a,thisPageToValue:r,nextPageFromValue:s,nextPageToValue:nextPageToValue})),c=null},removeRouteMap:function(t){var e=this.routeMap[t];delete e.container,delete e.hasInit},destroy:function(){for(var e in this.routeMap)this.removeRouteMap(e);p(t,"hashchange",self._onHashChange),self._onHashChange=null},isTranslating:function(){return this.currentInfo.translating},route:function(e,n,i){var o=this;if(m(e)&&!o.shadowRouter&&(e=o.getRouteUrl()),""===e&&o.currentInfo.defaultUrl&&(e=o.currentInfo.defaultUrl),o.currentInfo.currentUrl==e||o.currentInfo.translating)return!1;for(var r in o.routeMap)if(new RegExp(r,"g").test(e)){this.shadowRouter||(t.location.hash=e),o.currentInfo.currentUrl=e;var s=o.routeMap[r];return o.currentInfo.currentRouter==s?(s.afterShow(s.container,e),!1):(m(i)&&(i=s.translateTime),m(n)&&(n="right"),s.hasInit||(s.readyState=new h(s),s.hasInit=!0,s.container=document.createElement("div"),o._initStyle(s.container.style),s.init?s.init(s.container,function(){s.readyState.setOk()}):s.readyState.setOk()),s.readyState.ok(function(){o.currentInfo.translating=!0,o.nextPage=o.currentPage==o.page1?o.page2:o.page1;var t=o.currentPage,r=o.currentInfo.currentRouter;return o.currentPage&&0==i?(r.beforeRemove(r.container),t.removeChild(r.container),o.container.removeChild(t),o.nextPage.style.top="0px",o.nextPage.style.left="0px",o.nextPage.appendChild(s.container),o.container.appendChild(o.nextPage),s.firstAppend&&(s.firstAppend(s.container,e),s.firstAppend=null),s.afterAppend(s.container,e),s.firstShow&&(s.firstShow(s.container,e),s.firstShow=null),s.afterShow(s.container,e),o.currentPage=o.nextPage,o.currentInfo.currentRouter=s,void(o.currentInfo.translating=!1)):(o.nextPage.appendChild(s.container),o.container.appendChild(o.nextPage),s.firstAppend&&(s.firstAppend(s.container,e),s.firstAppend=null),s.afterAppend(s.container,e),o.currentPage?(o.transform(t,o.nextPage,i,n),setTimeout(function(){r.beforeRemove(r.container),t.removeChild(r.container),o.container.removeChild(t),s.firstShow&&(s.firstShow(s.container,e),s.firstShow=null),s.afterShow(s.container,e),o.currentInfo.translating=!1},i+20)):(s.firstShow&&(s.firstShow(s.container,e),s.firstShow=null),s.afterShow(s.container,e),o.currentInfo.translating=!1),o.currentPage=o.nextPage,void(o.currentInfo.currentRouter=s))}),!0)}return!1}},"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.cmd?define("NRouter",[],function(t,n,i){i.exports=e}):t.NimanRouter=e}(this),function(_window){function NAjax(t){return fun.ajax(t)}var createId=function(t){t=t||"";for(var e=[],n="0123456789ABCDEF",i=0;32>i;i+=1)e[i]=n.substr(Math.floor(16*Math.random()),1);return t+e.join("")},createXMLHttpRequest=function(t){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)for(var n=["Microsoft.XMLHTTP","MSXML.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.7.0","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],i=0;i<n.length;i++)try{if(e=new ActiveXObject(n[i]))break}catch(o){}return e?(e.onreadystatechange=function(){4==e.readyState&&200==e.status&&t(e.responseText)},e):void 0},parametersToString=function(t,e){var n,i,o="";t=t||{};for(n in t)t.hasOwnProperty(n)&&(n=e?encodeURIComponent(n):n,"string"!=typeof t[n]&&(t[n]=JSON.stringify(t[n])),i=e?encodeURIComponent(t[n]):t[n],o+=n+"="+i+"&");return o.replace(/&$/,"")},fullUrl=function(t,e){return t=t+"?"+e,t.replace(/\?$/g,"")},head=document.getElementsByTagName("head")[0]||document.documentElement,scripts=head.getElementsByTagName("script"),getJs=function(t,e){var n=document.createElement("script");n.type="text/javascript",n.originSrc=t;var i=function(t){e&&e(n,t)};/msie [678]/g.test(navigator.userAgent.toLowerCase())?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechang=null,i(window.event))}:n.onload=n.onerror=i,n.src=t,head.insertBefore(n,scripts[0])},Void=function(){},fun={},JsonParser=function(data){try{var JSON=window.JSON;return data=JSON&&JSON.parse?JSON.parse(data):eval("("+data+")")}catch(e){window.console&&window.console.log(e.stack)}return null};fun.request=function(t){var e=t.dataType,n=t.success,i=t.error;void 0===t.async&&(t.async=!0),e&&"json"==e.toLowerCase()&&(n=function(e){e=JsonParser(e),t.success(e)},i=function(e){e=JsonParser(e),t.error(e)});var o=createXMLHttpRequest(n||Void,i||Void),r=t.url,s=parametersToString(t.parameters,!0);"GET"==t.type?(o.open("GET",fullUrl(r,s),t.async),t.beforeSend&&t.beforeSend(o),o.send(null)):(o.open("POST",r,t.async),t.beforeSend&&t.beforeSend(o),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s))},fun.jsonP=function(t){var e=t.callback||createId("jsonP_");t.parameters.callback=e;var n=fullUrl(t.url,parametersToString(t.parameters,!0));window[e]=function(n){window[e]=null,t.success&&t.success(n)};var i=document.getElementsByTagName("head")[0]||document.documentElement;getJs(n,function(t){i.removeChild(t)})},fun.ajax=function(t){var e=t.type=(t.type||"get").toUpperCase();t.parameters=t.parameters||{},"GET"==e||"POST"==e?fun.request(t):"JSONP"==e&&fun.jsonP(t)},NAjax.fun=fun,NAjax.setPromise=function(t){if(!NAjax.hasPromise){var e=NAjax.fun.ajax;NAjax.fun.ajax=function(n){return new t(function(t){var i=n.success;n.success=function(e){i&&i(e),t(e)},e(n)})},NAjax.hasPromise=!0}},_window.Promise&&NAjax.setPromise(_window.Promise),"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=NAjax:"function"==typeof define&&define.cmd?define("NAjax",[],function(t,e,n){n.exports=NAjax}):_window.NimanAjax=NAjax}(this),function(t){function e(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function n(t){t=t||[document],t=t instanceof Array||t instanceof n?t:[t],this.domList=t,this.length=this.domList.length;for(var e=0;e<this.domList.length;e++)this[e]=this.domList[e]}Array.prototype.forEach=Array.prototype.forEach||function(t){for(var e=0;e<this.length;e++){var n=t(this[e],e,this);if(0==n)break}};var i=function(t,e){return"keypress"==e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||t.attachEvent)?"keydown":e},o=function(t){return void 0!=window.Element&&t instanceof window.Element||navigator&&new RegExp("msie [67]","g").test(navigator.userAgent.toLowerCase())&&"object"==typeof t?!0:!1},r=function(t,n){t=t instanceof Array?t:[t];var i=[];t.forEach(function(t){n(t),i=i.concat(e(t.childNodes))}),i.length>0&&r(i,n)},s=function(t,e,n){var i=t.className=t.className||" ";i=i.split(" "),i.forEach(function(t,n){t==e&&(i[n]="")}),t.className=i.join(" "),n&&(t.className=(t.className+" "+e).replace(/\s+/g," ").replace(/^\s+|\s+$/g,""))},a=function(t){return t.replace(/^\w+$/g,"tagName="+t.toUpperCase()).replace(/^\./,"className=").replace(/^\#/,"id=").replace(/\[|\]/g,"").split("=")},u=null,c=function(){return document.dispatchEvent?function(t){var e=document.createEvent("Event");e.initEvent("click",!0,!0),t.dispatchEvent(e)}:document.createElement("div").click?function(t){t.click()}:function(){}}();n.setSizzle=function(t){var e=n.prototype;u||(u=e._str,e._str=function(e){var n=[];return this.domList.forEach(function(i){n=n.concat(t(e,i))}),n})},n.removeSizzle=function(){u&&(n.prototype._str=u,u=null)},n.prototype={_observeElement:function(t,e,n,o){o=o||!1,e=i(t,e),t.addEventListener?t.addEventListener(e,n,o):t.attachEvent("on"+e,n)},_stopObserveElement:function(t,e,n,o){o=o||!1,e=i(t,e),t.removeEventListener&&t.removeEventListener(e,n,o),t.detachEvent&&t.detachEvent("on"+e,n)},_QueryMap:{tagName:function(t,e,n){t.forEach(function(t){r(t,function(t){var i=t.tagName&&t.tagName.toUpperCase();i==e.toUpperCase()&&n.push(t)})})},className:function(t,e,n){t.forEach(function(t){r(t,function(t){for(var i=(t.className||"").split(" "),o=0;o<i.length;o++)if(i[o]==e){n.push(t);break}})})},id:function(t,e,n){t.forEach(function(t){r(t,function(t){var i=t.getAttribute&&t.getAttribute("id");i==e&&n.push(t)})})}},_str:function(t){var e=this,n=t.split(" "),i=[].concat(this.domList);return n.forEach(function(t){t=a(t);var n,o=t[0],s=t[1],u=t.length,c=[];for(var l in e._QueryMap)if(new RegExp(l,"g").test(o)){n=e._QueryMap[o];break}n||(n=function(t,e,n){t.forEach(function(t){r(t,function(t){if(t.getAttribute){var i=t.getAttribute(o);(2==u&&e==i||1==u&&"null"!=typeof i)&&n.push(t)}})})}),n(i,s,c),i=c}),i},_getFilteredDomList:function(t){return t instanceof n?[].concat(t.domList):"string"==typeof t?this._str(t):o(t)?[t]:t instanceof Array?t:"function"==typeof t?this._fun(t):[]},_fun:function(t){var e=[];return this.domList.forEach(function(n){r(n,function(n){t(n)&&e.push(n)})}),e},find:function(t){return new n(this._getFilteredDomList(t))},each:function(t){for(var e=0;e<this.length&&!1!==t.apply(this[e],[e,this[e]]);e++);return this},attr:function(t,e){return"undefined"!=typeof this[0]?"undefined"==typeof e?this[0]&&this[0].getAttribute&&this[0].getAttribute(t):(this.each(function(n,i){i.setAttribute&&i.setAttribute(t,e)}),this):void 0},prop:function(t,e){return"undefined"!=typeof this[0]?"undefined"==typeof e?this[0][t]:(this.each(function(n,i){i[t]=e}),this):void 0},css:function(t,e){if("undefined"==typeof e){var n=this[0].style&&this[0].style[t];return n=n?n:"auto"}return this.each(function(n,i){i.style[t]=e}),this},addClass:function(t){return this.each(function(e,n){s(n,t,!0)}),this},removeClass:function(t){return this.each(function(e,n){s(n,t)}),this},hasClass:function(t){var e=!1;return this.each(function(n,i){new RegExp("(\\s+|^)"+t+"(\\s+|$)","g").test(i.className)&&(e=!0)}),e},bind:function(t,e){var n=this;return this.each(function(i,o){n._observeElement(o,t,e)}),this},unbind:function(t,e){var n=this;return this.each(function(i,o){n._stopObserveElement(o,t,e)}),this},click:function(t){"function"==typeof t?this.bind("click",t):this.each(function(t,e){c(e)})},value:function(t){return"undefined"!=typeof this[0]?"undefined"==typeof t?this[0].value:(this.prop("value",t),this):void 0},show:function(){return this.css("display",""),this},hide:function(){return this.css("display","none"),this},toggle:function(){return this.each(function(t,e){e.style.display="none"==e.style.display?"":"none"}),this}},n.$=function(t){return o(t)||document==t?new n(t):(new n).find(t)},"function"!=typeof t.$&&(t.$=n.$),t.Sizzle&&n.setSizzle(t.Sizzle),"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=n:"function"==typeof define&&define.cmd?define("NDomQuery",[],function(t,e,i){i.exports=n}):t.NimanDomQuery=n}(this),function(t){var e,n,i;n=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e},i=function(){this.state="unfulfilled",this.thenList=[],this.params=[]},i.prototype={_complete:function(){var t=this;setTimeout(function(){for(var e,n=t.state;e=t.thenList.shift();){var i,o=null,r=!1,s=e.nextPromise;if("function"==typeof e[n]){try{i=e[n].apply(null,t.params)}catch(a){o=a}(r=i&&"function"==typeof i.then)&&!function(){i.then(function(t){s._resolve(t)},function(t){s._reject(t)})}(e),o?s._reject(o):r||s._resolve(i)}else s["resolved"==n?"_resolve":"_reject"].apply(s,t.params)}},0)},_then:function(t,e){var n=new i;return this.thenList.push({resolved:t,rejected:e,nextPromise:n}),"unfulfilled"!=this.state&&this._complete(),n},_change:function(t,e){"unfulfilled"===this.state&&(this.state=t,this.params=e,this._complete())},_resolve:function(t){return this._change("resolved",[t]),this},_reject:function(t){return this._change("rejected",[t]),this}},e=function(t){var n;if(t instanceof i)n=t;else{if(!(t instanceof Function))throw new Error("Promise constructor takes a function argument");n=new i,t(function(t){n._resolve(t)},function(t){n._reject(t)})}this.then=function(t,o){var r=new i;n._then(function(t){r._resolve(t)},function(t){r._reject(t)});var s=r._then(t,o),a=new e(s);return a},this["catch"]=function(t){return this.then(null,t)}},e.all=function(t){var n=new i,o=0,r=t.length,s=new e(n),a=[];t&&0!=t.length||n._resolve();for(var u=0;u<t.length;u++){var c=t[u];!function(t){c.then(function(e){o++,a[t]=e,o==r&&n._resolve(a)},function(t){n._reject(t)})}(u)}return s},e.resolve=function(t){var n=new i,o=new e(n);return t&&"function"==typeof t.then?t.then(function(t){n._resolve(t)},function(t){n._reject(t)}):n._resolve(t),o},e.reject=function(t){var n=new i,o=new e(n);return t&&"function"==typeof t.then?t.then(function(t){n._resolve(t)},function(){n._reject(t)}):n._reject(t),o},e.cast=function(t){if(t&&"function"==typeof t.then)return t;{var n=new i;new e(n)}return n._resolve(t),new e(n)},e.race=function(t){for(var n=new i,o=new e(n),r=!1,s=0;s<t.length;s++)t[s].then(function(t){!r&&n._resolve(t),r=!0},function(t){!r&&n._reject(t),r=!0});return o},t.Promise?t.Promise.NimanPromise=e:(e.NimanPromise=e,t.Promise=e),"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.cmd?define("NPromise",[],function(t,n,i){i.exports=e}):t.NimanPromise=e}(this),function(t){var e={},n=function(e){var n="function"==typeof t.Event&&e instanceof t.Event;return!n&&e.hasOwnProperty&&e.hasOwnProperty("toString")};!String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),!Array.prototype.forEach&&(Array.prototype.forEach=function(t){for(var e=0;e<this.length;e++){var n=t(this[e],e,this);if(0==n)break}}),Function.prototype.extendFrom=function(t){var e=function(){};return e.prototype=t.prototype,this.prototype=new e,this},e.createId=function(t){t=t||"";for(var e=[],n="0123456789ABCDEF",i=0;32>i;i+=1)e[i]=n.substr(Math.floor(16*Math.random()),1);return t+e.join("")};var i=function(t,e){for(var n=0;n<t.length;n++)if(e===t[n].src)return t[n].clone;return null},o=e.clone=function(t,e){var n,r,s=e||[];if(t instanceof Array)n=[],r="array";else{if("object"!=typeof t||null==t)return t;n={},r="object"}if(s.push({src:t,clone:n}),"object"==r)for(var a in t)i(s,t[a])||(n[a]=o(t[a],s));else if("array"==r)for(var u=0;u<t.length;u++)i(s,t[u])||(n[u]=o(t[u],s));return n};e.mix=function(){for(var t=Array.prototype.slice.call(arguments),e=t.shift(),i=0;i<t.length;i++){var o=t[i];for(var r in o)e[r]=o[r];n(o)&&(e.toString=o.toString)}return e},e.isBlank=function(t){return"undefined"==typeof t||""===t||null==t||0===t.length},e.toArr=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e};var r=e.Emitter=function(){this.emitterMap={},this.contextInfo={},this.listenerList=[],this.emitQueue=[]};r.prototype={_get:function(t){return this.emitterMap[t]=this.emitterMap[t]||[]},destroy:function(){this.emitterMap=null,this.listenerList=null},on:function(t,e,n,i){var o=this._get(t);return o.push({evtName:t,scope:e,fun:n,once:i}),this},un:function(t,e,n){for(var i=this._get(t),o=0;o<i.length;o++){var r=i[o];r.scope==e&&r.fun==n&&i.splice(o,1)}return this},_doEmit:function(){for(var t;t=this.emitQueue.pop();){this.emitting=!0;for(var e=t.shift(),n=this._get(e),i=[],o=0;o<n.length;o++){var r=n[o],s=r.fun.apply(r.scope,t);if(r.once&&i.push(r),!1===s)break}for(var o=0;o<i.length;o++){var r=i[o];this.un(r.evtName,r.scope,r.fun)}}this.emitting=!1},emit:function(){var t=e.toArr(arguments);return this.emitQueue.push(t),this.emitting||this._doEmit(),this}},r.setPromise=function(t){r.prototype.call=function(){var n=e.createId("$successEvent_"),i=e.createId("$failEvent_"),o=this,r=Array.prototype.slice.call(arguments),s=function(){resolve.apply(null,Array.prototype.slice.call(arguments)),o.un(i,o,a)},a=function(){reject.apply(null,Array.prototype.slice.call(arguments)),o.un(n,o,s)};return new t(function(){o.on(n,this,s,!0),o.on(i,this,a,!0),r.push(n),r.push(i),o.emit.apply(o,r)})}},t.Promise&&r.setPromise(t.Promise),"function"==typeof require&&"object"==typeof e&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.cmd?define("NUtils",[],function(t,n,i){i.exports=e}):t.NimanUtils=e}(this),function(t){function e(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function n(t){if(null==t)return"";for(var e,n={},i=t.split(";"),o=0;o<i.length;o++)e=i[o].split(":")[0],n[e]=i[o].replace(e+":","");return n}function i(t,o,r){t=t instanceof Array?t:[t];var s,a,u,c,l=[];for(u=0;u<t.length;u++)a=t[u],s=!1,data_bind=a.getAttribute&&a.getAttribute("data-bind"),data_bind&&(c=n(data_bind),s=r.apply(o,[a,c])),!0!==s&&!0!==a.ignore&&(l=l.concat(e(a.childNodes)));l.length>0&&i(l,o,r)}function o(t){var e,n=t.tagName&&t.tagName.toUpperCase();switch(n){case"TABLE":case"THEAD":case"TBODY":e=t.rows.length;for(var i=0;e>i;i++)t.deleteRow(0);break;case"TR":e=t.cells.length;for(var i=0;e>i;i++)t.deleteCell(0);break;default:t.innerHTML=""}}function r(n){var i;i="FORM "==(n.tagName&&n.tagName.toUpperCase())?t.document.createElement("form"):n.cloneNode(!1);for(var o=e(n.childNodes),s=0;s<o.length;s++)i.appendChild(r(o[s]));for(var s=0;s<p.length;s++)n[p[s]]&&(i[p[s]]=n[p[s]]);return i}function s(t,e,n,i){var o=e.indexOf("$root");for(o>-1&&(e=e.substr(o+5));e.indexOf("$parent")>-1;)e=e.replace(/\.\w+(\[\d+\])+\.\$parent/g,"");if(e=e.replace(/\[/g,".").replace(/\]/g,""),e=e.replace(/^\.+/g,""),""===e)return{parent:null,name:"",data:t};for(var r,s=e.split("."),a=t,u=null,c=0;c<s.length;c++){if(r=s[c],u=a,null===u||void 0===u||void 0===u[r])return{parent:u,data:void 0,name:r};a=u[r],"function"!=typeof a||i||(a=a(n,"get"))}return{parent:u,name:r,data:a}}function a(t){i(t,null,function(t,e){for(var n in e)if("each"==n)return void o(t)})}function u(t){try{t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}catch(e){}}function c(t){if(void 0==t||null==t)return!1;if(t instanceof Array)return!0;if(void 0!==t.length){for(var e=0;e<v.length;e++)if("function"!=typeof v[e])return!1;return!0}return!1}function l(){this.hasObservedProp={}}function f(t,e,n){var i=n||"";for(var o in t)e(t[o],i,o),"object"==typeof t[o]&&f(t[o],e,i+"."+o);c(t)&&e(t.length,i,"length")}function h(t){"string"==typeof t&&(t=document.getElementById(t)),this.id=g++,this.element=t,this.elementTemplate=r(t),this.templateId=0,this.domId=0,this.templates={},this.domList={},this.domTable={},this._buildChange(),this._init()}var d=function(t,e){return"keypress"==e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||t.attachEvent)?"keydown":e},p=["_eachId","_dataWith","_dataTemplate","_isWith","_dataSelectedPath","_dataEventInfo"],m=/msie [678]/g.test(t.navigator.userAgent.toLowerCase()),g=0,v=["pop","push","reverse","shift","sort","splice","unshift","concat"];l.prototype={shiftToArr:function(){var t=this;this.arrayMode=!0;for(var n=0;n<v.length;n++)this[v[n]]=function(n){return function(){return t.onArrCall&&t.onArrCall(n,e(arguments))}}(v[n]);this.observe("length")},unshiftFromArr:function(){if(this.arrayMode){this.arrayMode=!1;for(var t=0;t<v.length;t++)delete this[v[t]]}},observe:function(t){if(!this.hasObservedProp[t]){this.hasObservedProp[t]=1;var e=this;Object.defineProperty(this,t,{set:function(n){e.onSet&&e.onSet(t,n)},get:function(){return e.onGet?e.onGet(t):null}})}}},h.prototype={reflushAll:!1,changeEventProxy:!0,buildModel:function(t){function e(o,r,a){var u=i[r],h=s(t,r).data;u||(u=i[r]=new l,u.onGet=function(o){var a=s(t,r+"."+o,null,!0).data;if(new RegExp("boolean|number|string|function").test(typeof a)||null==a||void 0==a)return a;var u=i[r+"."+o];if(u)return u;{if("length"!=o||!this.arrayMode)return u=i[r+"."+o]=new l,c(a)&&(u.shiftToArr(),u.onArrCall=function(e,i){var a=s(t,r+"."+o).data;if(a&&a[e])var u=a[e].apply(a,i);return n.reflush(),u}),f(a,e,r+"."+o),u;var h=s(t,r).data;if(h)return h.length}},u.onSet=function(t,i){("object"==typeof i||c(i))&&f(i,e,r+"."+t),n._setter(r+"."+t,null,i),n.reflush()}),c(h)?(u.shiftToArr(),u.onArrCall=function(e,i){var o=s(t,r).data;if(o&&o[e])var a=o[e].apply(o,i);return"concat"!=e&&n.reflush(),a}):(u.unshiftFromArr(),delete u.onArrCall),u.observe(a)}if("function"!=typeof Object.defineProperty||m)return this.bind(t),t;var n=this,i=(new l,n.observeAbleObjectMap={});return f(t,e),this.bind(t),this.model=i[""]},_deleteNode:function(t){void 0!==t.domId&&delete this.domTable[this.getDataInfo(t,"").basePath][t.domId],this._stopObserve(t),t.parentNode.removeChild(t)},deleteArrNode:function(t){var e,n=[];for(i(t,this,function(t,e){e.each&&n.push(t)});e=n.pop();)for(var o,r,s=(e._dataIndex||0,this._getDomlist(e));o=s.shift();)for(;r=o.shift();)this._deleteNode(r);this._deleteNode(t)},_content:function(t,e,i){var o=this._getDataPath(t,i),r=new RegExp("^html","g").test(e),a=new RegExp("Template$","g").test(e),u=new RegExp("^value$","g").test(e),c=s(this.data,o,t),l=c.data,f=l;a&&"object"==typeof f&&(f=t._dataTemplate.replace(/\$\{S*(\w|\.)+\}/g,function(e){var n=e.replace(/^\$\{S*|\}$/g,""),i=s(f,n,t).data;return void 0==i?"":i})),f=void 0==f?"":f;var h=t._dataValueInfo||(t._dataValueInfo={});u?(t._dataValue=f,h.value!=f&&(t.value=f,h.value=f)):h.inner!=f&&(r?t.innerHTML=f:(t.innerText=f,t.textContent=f),h.inner=f);{var d=t.parentNode;this._isBlank}if("SELECT"!=t.tagName.toUpperCase()&&"DATALIST"!=t.tagName.toUpperCase()||0!=t.options.length||this._setter(o,t,t.value),u&&"OPTION"==t.tagName.toUpperCase()&&d&&("SELECT"==d.tagName.toUpperCase()||"DATALIST"==d.tagName.toUpperCase())){t.value===d._dataValue?d.value=t.value:d._dataValue||d.value||d.options[0]!=t||(d.value=t.value);var p=this.getDataInfo(d),m=p.path+"."+n(d.getAttribute("data-bind")).value;this._setter(m,d,d.value)}},_isBlank:function(t){return"undefined"==typeof t||""===t||null==t||0===t.length},_attrStyleProp:function(t,e,n){var i=n.replace(/\{|\}/g,"").split(","),o=new RegExp("^attr$","g").test(e),r=new RegExp("^style$","g").test(e),a=new RegExp("^prop$","g").test(e),u=t._dataValueInfo||(t._dataValueInfo={});u.attr=u.attr||(u.attr={}),u.prop=u.prop||(u.prop={}),u.style=u.style||(u.style={});for(var c=0;c<i.length;c++){var l=i[c].split(":"),f=l[0],h=l[1],d=this._getDataPath(t,h),p=s(this.data,d,t).data;"undefined"!=typeof p&&(o?u.attr[f]!=p&&(t.setAttribute(f,p),u.attr[f]=p):r?u.style[f]!=p&&(t.style[f]=p,u.style[f]=p):a&&u.prop[f]!=p&&(t[f]=p,u.prop[f]=p))}},_afterRender:function(t,e,n){var i=this._getDataPath(t,n),o=s(this.data,i,t,!0);o&&"function"==typeof o.data&&o.data(t,"afterRender")},_event:function(t,e,n){for(var i=n.replace(/\{|\}/g,"").split(","),o=0;o<i.length;o++){var r=i[o].split(":"),a=r[0],u=r[1],c=!0;new RegExp("\\(\\)$").test(u)&&(c=!1);var l=this._getDataPath(t,u),f=s(this.data,l,t,c),h=f.data;if(!h)return;for(var d=function(t,e){return function(n){n.srcElement||n.target;e(t,"event",n)}}(t,h),p=t._dataEventInfo=t._dataEventInfo||[],m=!1,o=0;o<p.length;o++)if(a==p[o].name){m=!0;break}m||(t._dataEventInfo.push({name:a,callback:d}),this._observeElement(t,a,d))
}},_observeElement:function(t,e,n,i){i=i||!1,e=d(t,e),t.addEventListener?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)},_stopObserveElement:function(t,e,n,i){i=i||!1,e=d(t,e),t.removeEventListener&&t.removeEventListener(e,n,i),t.detachEvent&&t.detachEvent("on"+e,n)},_stopObserve:function(t){t=t||this.element,i(t,this,function(t){if(t._dataEventInfo)for(var e;e=t._dataEventInfo.pop();)this._stopObserveElement(t,e.name,e.callback)})},_setter:function(t,e,n){var i=s(this.data,t,e,!0),o=i.parent,r=i.data;null!=o&&("function"==typeof r?r(e,"set",n):o[i.name]=n)},_buildChange:function(){var e=this;this._change=function(i){if(!e.reflushing){i=i||t.event;var o=i.srcElement||i.target,r=o.getAttribute("data-bind");if(r){var s=n(r),a=e._getDataPath(o,s.value),c=o.tagName.toUpperCase(),l=o.getAttribute("type"),f=!new RegExp("radio|checkbox","g").test(l)&&new RegExp("INPUT|TEXTAREA","g").test(c);(f||"SELECT"==c)&&e._setter(a,o,o.value),e.reflush(),u(i)}}}},_init:function(){this._observeElement(this.element,"change",this._change);var t=this.templates;i(this.element,this,function(e,n){for(var i in n)("with"==i||"each"==i)&&(e._dataWith=n[i]),"each"==i?(e._eachId=this.templateId++,t[e._eachId]={dom:e}):"with"==i&&(e._isWith=!0),"innerHTML"===i&&(e._dataTemplate=n[i]),"templateId"===i&&void 0==n.innerHTML&&(e._dataTemplate=document.getElementById(n[i]).innerHTML),new RegExp("Template$","g").test(i)&&void 0==e._dataTemplate&&(e._dataTemplate=e.innerHTML)});for(var n in t){var o=r(t[n].dom);a(e(o.childNodes)),t[n].dom=o,o=null}a(this.element)},bind:function(t){this.data=t,this.reflush()},getDataInfo:function(t,e,n){var i,o,r="",s="",a=t,u=!1;void 0!=e&&""!==e&&(s=r=e);var c=s.replace(".","\\.");n||void 0==t._dataIndex||(o=t._dataIndex,s=r=t._dataIndex+"."+r),!n&&t._dataWith&&(t=t.parentNode);do if(t._dataWith?(t!==a&&(u=!0),r=t._dataWith+"."+r,void 0!=t._dataIndex&&(o=t._dataIndex,r=t._dataIndex+"."+r)):void 0==o&&void 0!=t._dataIndex&&(o=t._dataIndex,r=t._dataIndex+"."+r),(i=r.indexOf("$root"))>-1){r=r.substr(i+5),u||void 0===o||(r=r.replace(new RegExp(c+"[\\.]?$","g"),e));break}while(t&&t!=this.element&&(t=t.parentNode));return r=r.replace(/\.$/g,""),{basePath:r.replace(new RegExp("[\\.]?"+c+"[\\.]?$","g"),""),path:r,index:o}},_getDataPath:function(t,e,n){var i=this.getDataInfo(t,e,n);return i.path},_getDomlist:function(t,e){void 0==e&&(e=this.getDataInfo(t,"",!0).path);var n=t.domId;return this.domList[n]=this.domList[n]||[]},_fun:function(t,e){var n=this._getDataPath(t,e),i=s(this.data,n,t),o=i.data;return o?o.apply(i.parent,[t,n]):!0},reflushWhenOld:function(t){(m||!Object.defineProperty)&&this.reflush(t)},reflush:function(t){this.reflushing=!0;var n=this.data;t=this.reflushAll?this.element:t||this.element,i(t,this,function(t,o){var a=t.tagName.toUpperCase(),u=this.getDataInfo(t,"").basePath;if(void 0==t.domId&&(t.domId=this.domId++),this.domTable[u]||(this.domTable[u]={}),this.domTable[u][t.domId]||(this.domTable[u][t.domId]=t),!o.fun||!1!==this._fun(t,o.fun)){for(var c in o)if("each"==c){var l=this.getDataInfo(t,"",!0),f=l.path,h=s(n,f,t).data;h||(h=[]);var d=this.templates[t._eachId],p=this._getDomlist(t,f),g=h.length-p.length;if(g>0)for(var v=0;g>v;v++){for(var y=r(d.dom),w=e(y.childNodes),_=0;_<w.length;_++)t.appendChild(w[_]);y=null,p.push(w)}if(0>g)for(var v=0;-g>v;v++)for(var x=p.pop(),_=0;_<x.length;_++)this.deleteArrNode(x[_]);for(var v=0;v<h.length;v++){var E=p[v];i(E,this,function(t){return t._dataIndex=v,t._isWith})}}else new RegExp("^text$|^html$|^textTemplate$|^htmlTemplate$|^value$","g").test(c)?this._content(t,c,o[c]):new RegExp("^attr$|^style$|^prop$","g").test(c)?this._attrStyleProp(t,c,o[c]):"event"===c&&this._event(t,c,o[c]);if(new RegExp("INPUT|SELECT|TEXTAREA","g").test(a)&&(m||!this.changeEventProxy)){var b="change";t._dataEventInfo=t._dataEventInfo||[],t._dataEventInfo.push({name:b,callback:this._change}),this._stopObserveElement(t,b,this._change),this._observeElement(t,b,this._change)}o.afterRender&&this._afterRender(t,c,o.afterRender)}}),this.reflushing=!1},getValue:function(t){var e=this.getDataInfo(t);return s(this.data,e.path,t).data},destroy:function(){this._stopObserve(),this.element=null,this.templates=null,this.domList=null,this.elementTemplate=null,this.hasDestroyed=!0}},"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=h:"function"==typeof define&&define.cmd?define("NViewModel",[],function(t,e,n){n.exports=h}):t.NimanViewModel=h}(this),function(t){var e=function(e){function n(t){function n(){var t=(new Date).getTime();i.info.lastTime=i.info.lastTime||t;var e=t-i.info.lastTime;i.info.lastTime=t;var n=i.info.speed-i.deceleration*e;if(0>=n)return i.animation.stop(),i._afterInertiaStop(),void i.core.emit("$inertiaend",{});var o=(i.info.speed+n)/2*e,s=i.info.distance=r(i.info.distance+o),a=r(i.info.a/i.info.c*s),u=r(i.info.b/i.info.c*s),c=i.info.currentXY={x:i.info.lastXY.x+a,y:i.info.lastXY.y+u};i.info.speed=n,i._setPosition({inertia:!0},c)}this.core=t,this.info={hasDown:!1,lastXY:{x:0,y:0}};var i=this;i.docMove=function(t){e.positionInfo(t),i._mousemove(t)},i.docUp=function(t){e.positionInfo(t),i._mouseup(t)},this.points=[],this.init(!0);var i=this;this.animation=new y(n)}var i=!1,o=t.navigator,r=Math.round,s=".ds_"+r(1e6*Math.random()),a=t.document,u=o&&/opera|firefox/g.test(o.userAgent.toLowerCase()),c=function(t,e,n){var i=t.className=t.className||" ";i=i.split(" ");for(var o=0;o<i.length;o++)i[o]==e&&(i[o]="");t.className=i.join(" "),n&&(t.className=(t.className+" "+e).replace(/\s+/g," ").replace(/^\s+|\s+$/g,""))},l=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1)}}(),f={},h=0,d=function(){var t;for(var e in f)t=f[e]();p&&l(d)},p=!1,m=a.createElement("div").style;if(o&&/msie [678]/g.test(o.userAgent.toLowerCase())&&(i=!0),u){var g=a.createElement("style");g.innerHTML=s+" { -moz-user-select: none; }";var v=a.getElementsByTagName("head")[0]||a.documentElement;v.appendChild(g)}var y=function(t){t&&this.setCallback(t)};y.prototype={start:function(){this.playing||(0==h&&(l(d),p=!0),this.callback&&!this.playing&&(h++,f[h]=this.callback,this.index=h,this.playing=!0))},playing:!1,stop:function(){this.playing&&(h--,delete f[this.index],this.playing=!1),0==h&&(p=!1),this.onStop&&this.onStop()},setCallback:function(t){this.callback=t},removeCallback:function(){this.callback=null}};{var w=function(){for(var t=["t","webkitT","MozT","msT","OT"],e=0;e<t.length;e++){var n=t[e]+"ransform";if(n in m)return t[e].substr(0,t[e].length-1)}return!1}(),_=(w?"-"+w.toLowerCase()+"-":"",function(t){return""===w?t:(t=t.charAt(0).toUpperCase()+t.substr(1),w+t)}),x=_("transform"),E=(_("transitionProperty"),_("transitionDuration")),b=_("transformOrigin"),T=_("transitionTimingFunction");_("transitionDelay"),function(){if(w===!1)return!1;var t={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return t[w]}()}e.transform=x,e.transformOrigin=b,e.oldIE=i,e.Animation=y;var N=e.Events.prototype;N.buildDragger=function(){return this.dragger||(this.dragger=new n(this)),this},N.setContainer=function(t){this.dragger&&this.dragger.setContainer(t)};var S=N.on;N.on=function(t){return new RegExp("^\\$dragstart$|^\\$dragging$|^\\$dragend$|^\\$inertiaend$","g").test(t)&&this.buildDragger(),S.apply(this,arguments)},e.handler.Dragger=n,n.prototype={isInertia:!0,useTransform:!0,delay:200,nbPoints:100,deceleration:.002,dragAble:!0,container:a,name:"Dragger",init:function(t){var n=t?"on":"un",i=e.listen(this.container);i[n]("mousedown",this,this._mousedown),i[n]("mousemove",this,this._mousemove),i[n]("mouseup",this,this._mouseup),i[n]("touchstart",this,this._touchstart),i[n]("touchmove",this,this._touchmove),i[n]("touchend",this,this._touchend),i[n]("$movestart",this,this._dragstart)},_domSelectAble:function(t,e){u?c(t,s,!e):t.onselectstart=function(){return e}},_selectAble:function(t){this._domSelectAble(this.core.bindedElement,t),this._domSelectAble(this.container,t),this._domSelectAble(a,t)},_mousedown:function(t){this._down(t,{x:t.clientX,y:t.clientY})},_touchstart:function(t){var e=t.targetTouches;this._down(t,{x:e[0].clientX,y:e[0].clientY})},_isParent:function(t){var e=t,n=this.core.bindedElement;if(e==n)return!0;for(;e=e.parentNode;)if(e==n)return!0;return!1},_down:function(t,n){if(this._isParent(e.getSrcElement(t))){if(this.info.inertiaMoving&&this._inertiaStop(),this._afterInertiaStop(),this.container!=a){var i=e.listen(a);i.on("mousemove",this,this.docMove),i.on("mouseup",this,this.docUp)}this.info.downXY=n,this.info.hasDown=!0,this._selectAble(!1)}},_mousemove:function(t){this._move(t,{x:t.clientX,y:t.clientY})},_touchmove:function(t){var e=t.targetTouches;this._move(t,{x:e[0].clientX,y:e[0].clientY})},beforeMove:function(){return!0},_isMutiTouch:function(t){var e=t.touches;if(!e||e.length<2)return!1;for(var n=0;n<e.length;n++)if(!this._isParent(e[n].target))return!1;return!0},_move:function(t,e){!this.beforeMove(t,e)||t&&this._isMutiTouch(t)||this.info.dragstart&&(this.isInertia&&(this.points.unshift({x:e.x,y:e.y,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()),this._setPosition(t,e))},_mouseup:function(t){this._up(t)},_touchend:function(t){this._up(t)},_up:function(t){if(this.info.hasDown&&(this.info.hasDown=!1,this._dragend(t),this.container!=a)){var n=e.listen(a);n.un("mousemove",this,this.docMove),n.un("mouseup",this,this.docUp)}this._selectAble(!0)},_initStartXY:function(){var t=this.core.bindedElement.style;if(t[T]="",t[E]="",this.useTransform&&!i){var e=t[x].replace(/translate\(|\)/g,"").split(",");2==e.length?(this.info.teansX=parseInt(e[0]),this.info.teansY=parseInt(e[1])):(this.info.teansX=0,this.info.teansY=0),this.info.lastPosition={x:this.info.teansX,y:this.info.teansY}}else this.info.left=parseInt((t.left+"").replace("px",""))||0,this.info.top=parseInt((t.top+"").replace("px",""))||0,this.info.lastXY=this.info.lastPosition={x:this.info.left,y:this.info.top}},_dragstart:function(t){this.info.hasDown&&(this._initStartXY(),this.info.dragstart=!0,this.core.emit("$dragstart",t))},_dragend:function(t){this.info.lastXY=this.info.lastPosition,this.info.dragstart&&(this.info.dragstart=!1,this.isInertia&&(this.info.lastTime=0,this.info.inertiaMoving=!1,this.info.speed=0,this.info.distance=0,this._inertiaStart(),this.points=[]),this.core.emit("$dragend",t))},_setXY:function(t,e){if(!isNaN(t)&&!isNaN(e)){var n=this.core.bindedElement.style;this.useTransform&&!i?(t=r(t+this.info.teansX),e=r(e+this.info.teansY),n[x]="translate("+t+"px,"+e+"px)  translateZ(0px)"):(t=r(t+this.info.left),e=r(e+this.info.top),n.left=t+"px",n.top=e+"px")}},_setPosition:function(t,e){this.dragAble&&e&&this.info.downXY&&(this._setXY(e.x-this.info.downXY.x,e.y-this.info.downXY.y),this.info.lastPosition=e,t.currentXY=e,this.core.emit("$dragging",t))},setContainer:function(e){"string"==typeof e&&(e=t.document.getElementById(e)),this.init(!1),this.container=e,this.init(!0)},_inertiaStart:function(){for(var t,e,n=(new Date).getTime(),i=0,o=this.points.length;o>i&&(e=this.points[i],!(n-e.tick>this.delay));i++)t=e;if(!t)return void this.core.emit("$inertiaend",{});var r=this.points[0],s=r.tick-t.tick;this.info.a=r.x-t.x,this.info.b=r.y-t.y;var a=this.info.c=Math.sqrt(Math.pow(this.info.a,2)+Math.pow(this.info.b,2));return 0==a||isNaN(a)?void this.core.emit("$inertiaend",{}):(this.info.speed=this.info.v=this.info.c/s,this.info.distance=0,this.info.inertiaMoving=!0,void this.animation.start())},_afterInertiaStop:function(){this.info.lastTime=0,this.info.inertiaMoving=!1,this.info.speed=0,this.info.distance=0,this.points=[]},_inertiaStop:function(){this.animation.stop();var t=this.core.bindedElement.style;t[T]="",t[E]="",this._setPosition({inertia:!0},this.info.currentXY),this._afterInertiaStop()},destroy:function(){this.init(!1),this.animation.stop()}};var A=!1,M=function(t){new RegExp("INPUT|SELECT|BUTTON|TEXTAREA").test(t.manager.src.tagName.toUpperCase())||e.preventDefault(t)};e.forMobileDragger=function(t,n){A&&t||(A=t,t=t?"on":"un",e.listen(n||document)[t]("touchstart",null,M))}};if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var n=require("NEvents");e(n),module.exports=n}else"function"==typeof define&&define.cmd?define("Dragger",["NEvents"],function(t,n,i){var o=t("NEvents");e(o),i.exports=o}):e(t.NimanEvents)}(this),function(t){function e(e){function n(t){this.core=t,this.info={hasDown:!1,lastXY:{x:0,y:0},lastUp:0},this.init(!0);var e=this;e.docUp=function(t){e._mouseup(t)}}var i=Math.abs,o=t.document,r=function(t,e){for(var n in e)t[n]=e[n];return t};n.prototype={durationClick:400,durationThreshold:1e3,horizontalDistanceThreshold:75,verticalDistanceThreshold:30,container:o,deviation:5,init:function(t){var e=t?"on":"un",n=this.core;n[e]("mousedown",this,this._mousedown),n[e]("mousemove",this,this._mousemove),n[e]("mouseup",this,this._mouseup),n[e]("touchstart",this,this._touchstart),n[e]("touchmove",this,this._touchmove),n[e]("touchend",this,this._touchend),n[e]("gesturestart",this,this._gesturestart),n[e]("gesturechange",this,this._gesturechange),n[e]("gestureend",this,this._gestureend),n[e]("orientationchange",this,this._orientationchange)},_isParent:function(t){var e=t,n=this.core.bindedElement;if(e==n)return!0;for(;e=e.parentNode;)if(e==n)return!0;return!1},_isGesture:function(t){for(var e=Array.prototype.slice.call(t.touches),n=0;n<e.length;n++)if(!this._isParent(e[n].target))return!1;return!0},_bulidTargetTouches:function(t){var e,n=t.touches,i=[];for(e=0;e<n.length;e++)i.push({x:n[e].clientX,y:n[e].clientY});return i},_mousedown:function(t){this._down(t,[{x:t.clientX,y:t.clientY}])},_mousemove:function(t){this._move(t,[{x:t.clientX,y:t.clientY}])},_mouseup:function(t){this._up(t,[{x:t.clientX,y:t.clientY}])},_touchstart:function(t){this._down(t,this._bulidTargetTouches(t))},_touchmove:function(t){this._move(t,this._bulidTargetTouches(t))},_touchend:function(t){this._up(t,this._bulidTargetTouches(t))},_gesturestart:function(){},_gesturechange:function(){},_gestureend:function(){},_orientationchange:function(){},_getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_down:function(t,n){1==n.length&&this._reset(t,n);var i=this.info,s=this;i.hasDown=!0,i.downTime=(new Date).getTime(),i.downXYs=n,n.length>1&&this._isGesture(t)&&(i.startDistance=this._getDistance(n[0],n[1]),this.core.emit("$gesturestart",t)),e.listen(o).on("mouseup",this,this.docUp),this.container!=o&&e.listen(this.container).on("mouseup",this,this.docUp);var a=r({},t);i.holdTimeout=setTimeout(function(){s.core.emit("$taphold",a)},this.durationThreshold)},_move:function(t,e){var n=(new Date).getTime(),o=this.info;o.hasDown&&(e.length>1&&this._isGesture(t)&&(this.core.emit("$gesturechange",t),2==e.length&&this._scale(t,e)),1!=e.length||o.swiped||(this._swipe(t,e,n),o.hasMove||(o.hasMove=i(o.downXYs[0].x-e[0].x)>this.deviation||i(o.downXYs[0].y-e[0].y)>this.deviation,o.hasMove&&clearTimeout(o.holdTimeout))))},_reset:function(){var t=this.info;t.hasDown=!1,t.swiped=!1,t.hasMove=!1,clearTimeout(t.holdTimeout),e.listen(o).un("mouseup",this,this.docUp),this.container!=o&&e.listen(this.container).un("mouseup",this,this.docUp)},_up:function(t){var e=this.info,n=(new Date).getTime();return n-e.lastUp<this.durationClick?void clearTimeout(e.holdTimeout):(e.lastUp=n,!e.hasMove&&n-e.downTime<this.durationThreshold&&this.core.emit("$sclick",t),void this._reset())},_swipe:function(t,e,n){var o,r=this.info,s=r.downXYs,a=e[0].x-s[0].x,u=e[0].y-s[0].y,c=!0;c=c&&n-r.downTime<this.durationThreshold;var l=c&&i(a)>this.horizontalDistanceThreshold&&i(e[0].y-s[0].y)<this.verticalDistanceThreshold,f=c&&i(u)>this.horizontalDistanceThreshold&&i(e[0].x-s[0].x)<this.verticalDistanceThreshold;(l||f)&&(r.swiped=!0,o=l?0>a?"left":"right":0>u?"top":"bottom",t.swipeType=o,this.core.emit("$swipe",t),this.core.emit("$swipe"+o,t))},_scale:function(t,e){t.scale=this._getDistance(e[0],e[1])/this.info.startDistance,this.core.emit("$scale",t)},setContainer:function(e){"string"==typeof e&&(e=t.document.getElementById("container")),this.container=e}},e.handler.Gesture=n,e.useGesture=!0;var s=e.Events,a=e.Events=function(){s.apply(this,arguments),e.useGesture&&(this.gesture=new n(this))},u=function(){};u.prototype=s.prototype,a.prototype=new u}if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var n=require("NEvents");e(n),module.exports=n}else"function"==typeof define&&define.cmd?define("Gesture",["NEvents"],function(t,n,i){var o=t("NEvents");e(o),i.exports=o}):e(t.NimanEvents)}(this),function(t){var e=function(t,e){var n=Math.round,i=function(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))},o=function(t,e,n){var i,o,r=n.info.padding,s=n.info.size;return i=s.outWidth-s.inWidth*n.zoom,i>r.left&&(i=r.left),t>r.left&&(t=r.left),t<i-r.right&&(t=i-r.right),o=s.outHeight-s.inHeight*n.zoom,o>r.top&&(o=r.top),e>r.top&&(e=r.top),e<o-r.bottom&&(e=o-r.bottom),{dx:t,dy:e}},r=function(e,i){"string"==typeof e&&(e=document.getElementById(e)),""==e.style.position&&(e.style.position="relative"),this.outDom=e,"string"==typeof i&&(i=document.getElementById(i)),""==i.style.position&&(i.style.position="relative"),this.dom=i,t.forMobileDragger(!0,e),this.tempDiv=document.createElement("div"),this.info={padding:{top:0,right:0,bottom:0,left:0},offsetXY:{x:0,y:0},scrollLeft:0,scrollTop:0},this.scrollCss+="border-radius:"+n(this.scrollWidth/2)+"px";var r=this,s=t.listen(i).buildDragger();s.buildDragger(),this.core=s,this.dragger=s.dragger,s.dragger._setXY=function(e,i){if(!isNaN(e)&&!isNaN(i)&&r.scrollAble){var s,a=this.core.bindedElement,u=a.style,c=r.info,l=(c.size,r.useTransform&&!t.oldIE);l?(e=n(e+this.info.teansX),i=n(i+this.info.teansY),s=o(e,i,r),a.parentNode&&(u[t.transform]="translate("+s.dx+"px,"+s.dy+"px) "+c.translateZ+" scale("+r.zoom+") ",u[t.transformOrigin]=r.transformOrigin)):(e=n(e+this.info.left),i=n(i+this.info.top),s=o(e,i,r),a.parentNode&&(u.left=s.dx+"px",u.top=s.dy+"px")),r.info.offsetXY={x:s.dx,y:s.dy},r._moveScroll(),r.core.emit("$scrolling",{})}},this.animation=new t.Animation,s.on("$dragstart",this,this._hideScroll),s.on("$inertiaend",this,this._inertiaend),this.xScroll=document.createElement("div"),this.yScroll=document.createElement("div"),s.on("$down",this,this.reflush),this.reflush()};return r.prototype={zoom:1,scrollTime:300,showXScroll:!0,showYScroll:!0,useTempDiv:!1,useTranslateZ:!0,scrollAble:!0,transformOrigin:"0 0",useTransform:!0,scrollZindex:100,scrollCss:"background-color:#000000;border:solid 1px #FFFFFF;position:absolute;z-index:100;display:none;opacity:0;transition:opacity 300ms;",scrollWidth:3,scrollOpacity:.4,destroy:function(){this.core.un("$inertiaend",this,this._inertiaend),this.core.un("$dragging",this,this._onNextPageEvent),this.core.un("$dragstart",this,this._hideScroll),this.core.un("$down",this,this.reflush),t.forMobileDragger(!1,this.outDom),this.xScroll.parentNode&&this.outDom.removeChild(this.xScroll),this.yScroll.parentNode&&this.outDom.removeChild(this.yScroll),this.xScroll=null,this.yScroll=null},_moveScroll:function(){var e,i,o=this.info,r=o.size,s=o.offsetXY,a=self.useTransform&&!t.oldIE;this.showXScroll&&(e=o.scrollLeft=-n(s.x*r.outWidth/r.inWidth)/this.zoom,a?this.xScroll.style[t.transform]="translate("+e+"px,0px)"+o.translateZ:this.xScroll.style.left=e+"px"),this.showYScroll&&(i=o.scrollTop=-n(s.y*r.outHeight/r.inHeight)/this.zoom,a?this.yScroll.style[t.transform]="translate(0px,"+i+"px)"+o.translateZ:this.yScroll.style.top=i+"px")},_hideScroll:function(t,e){var n=e?0:this.scrollOpacity;this.xScroll.style.opacity=n,this.yScroll.style.opacity=n},_inertiaend:function(){this._hideScroll(null,!0),this._scrollToElement(this._near(this.info.offsetXY))},_scrollToElement:function(t,e){var n,i,o=this.info.padding;t&&(n=t.left+o.left,i=t.top+o.top,this.scrollTo.apply(this,[n,i,e]),this.info.currentElementIndex=t.index)},_playAnimation:function(t,e,n){var i={x:this.info.offsetXY.x,y:this.info.offsetXY.y},o={x:t-i.x,y:e-i.y},r=this,s=(new Date).getTime(),a=function(){var t=(new Date).getTime()-s,e=t/n,i=o.x*e,a=o.y*e;t>=n&&(i=o.x,a=o.y,r.dragger.dragAble=!0,r.animation.stop(),r.animation.removeCallback()),r.dragger._setXY(i,a)};this.animation.setCallback(a),this.animation.start()},_playZoomAnimation:function(t,e){var n=this,i=this.zoom,o=t-i,r=(new Date).getTime(),s=function(){var s=(new Date).getTime()-r;n.zoom=o*s/e+i,s>=e&&(n.zoom=t,n.dragger.dragAble=!0,n.animation.stop(),n.animation.removeCallback(),n._initXYScroll(),n._snap()),n.dragger._setXY(0,0)};this.animation.setCallback(s),this.animation.start()},_onNextPageEvent:function(){var t=this.info.nextPage,e=this.info.offsetXY,n=this.info.size,i=!1;i=i||"bottom"==t.type&&t.threshold>=n.inHeight+e.y-n.outHeight,i=i||"right"==t.type&&t.threshold>=n.inWidth+e.x-n.outWidth,i&&(t.callback(this.info.resetState),this.core.un("$dragging",this,this._onNextPageEvent),this.info.resetStateOn=!1)},_offset:function(t,e){for(var n=t.offsetLeft,i=t.offsetTop,o=t.offsetWidth,r=t.offsetHeight,s=this.zoom;(t=t.parentNode)&&t!=this.dom;)n+=t.offsetLeft,i+=t.offsetTop;return n*=s,i*=s,o*=s,r*=s,{left:-n,top:-i,right:n+o,bottom:i+r,index:e}},_near:function(t){var e,n,o,r,s,a,u,c=this.info.padding;if(!this.info.snapFilter)return null;for(e=this.info.snapBounds,a=t.x-c.left,u=t.y-c.top,shortest=null,r=1/0,n=0;n<e.length;n++)o=e[n],s=i(a,u,o.left,o.top),r>s&&(r=s,shortest=o);return shortest},_snap:function(){var t,e,n;if(!(n=this.info.snapFilter))return void(this.info.snapBounds=null);e=this.info.snapBounds=[],t=n();for(var i=0;i<t.length;i++)e.push(this._offset(t[i],i))},_initXYScroll:function(){var t=this.info,e=t.size,n=this.xScroll.style,i=this.yScroll.style,o=Math.round(Math.pow(e.outWidth,2)/e.inWidth)/this.zoom,r=Math.round(Math.pow(e.outHeight,2)/e.inHeight)/this.zoom;n.cssText=this.scrollCss,n.left="0px",n.bottom="0px",n.width=o+"px",n.height=this.scrollWidth+"px",i.cssText=this.scrollCss,i.right="0px",i.top="0px",i.height=r+"px",i.width=this.scrollWidth+"px",this._moveScroll(),o<e.outWidth&&(n.display="block"),r<e.outHeight&&(i.display="block")},nextPage:function(t,e,n){if(this.info.nextPage={type:t,threshold:e,callback:n,state:!1},this.core.un("$dragging",this,this._onNextPageEvent),!this.info.resetState){var i=this,o=this.info.resetState=function(){i.core.on("$dragging",i,i._onNextPageEvent)};this.info.resetStateOn=!0,o()}},config:function(t,e){void 0!==t&&(this[t]=e)},snap:function(t){var e,n=this;e="string"==typeof t?function(){return n.dom.ownerDocument.getElementsByTagName(t)}:t,this.info.snapFilter=e,this._snap()},resetState:function(){this.info.resetState&&!this.info.resetStateOn&&(this.info.resetStateOn=!0,this.info.resetState())},zoomTo:function(e,n,i){if(!this.animation.playing){n=void 0==n?this.scrollTime:n,this.dragger._initStartXY();var o=this.dragger.useTransform&&!t.oldIE;0!==n&&o?this._playZoomAnimation(e,n):(this.zoom=e,this.dragger._setXY(0,0),this._initXYScroll(),this._snap()),o||i(e)}},showScroll:function(t,e){this.showXScroll=t,this.showYScroll=e},scrollTo:function(t,e,n){this.animation.playing||(this.reflush(),this.dragger.info.inertiaMoving&&this.dragger._inertiaStop(),void 0==n&&(n=1),this.dragger._initStartXY(),this.dragger.dragAble=!1,this._playAnimation(t,e,n))},scrollToElement:function(t,e){if(!this.animation.playing){var n,i,o=this.info;o.snapFilter&&(n=o.snapBounds)&&(i=n[t])&&this._scrollToElement(i,e)}},padding:function(t,e,n,i){this.info.padding={top:t,right:e,bottom:n,left:i}},on:function(t,e,n){this.dragger.core.on(t,e,n)},un:function(t,e,n){this.dragger.core.un(t,e,n)},emit:function(){var t=this.dragger.core;t.emit.apply(t,arguments)},reflush:function(){{var t;this.info}""==this.outDom.style.position&&(this.outDom.style.position="relative"),this.showXScroll&&!this.xScroll.parentNode?this.outDom.appendChild(this.xScroll):!this.showXScroll&&this.xScroll.parentNode&&this.outDom.removeChild(this.xScroll),this.showYScroll&&!this.yScroll.parentNode?this.outDom.appendChild(this.yScroll):!this.showYScroll&&this.yScroll.parentNode&&this.outDom.removeChild(this.yScroll),this.info.translateZ=this.useTranslateZ?" translateZ(0px) ":"",t=this.info.size={outHeight:this.outDom.offsetHeight,outWidth:this.outDom.offsetWidth,inHeight:this.dom.offsetHeight,inWidth:this.dom.offsetWidth},this._initXYScroll();var e=this.outDom.style.display;this.outDom.style.display="none",this.outDom.style.display=e,this.useTempDiv&&(this.outDom.replaceChild(this.tempDiv,this.dom),this.outDom.replaceChild(this.dom,this.tempDiv))}},r.NEvents=r,r.Dragger=e,r};if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var n=require("NEvents");module.exports=e(n,require("Dragger"))}else"function"==typeof define&&define.cmd?define("Scroll",["NEvents","Dragger"],function(t,n,i){var o=t("NEvents");i.exports=e(o,t("Dragger"))}):t.JarKaiScroll=e(t.NimanEvents,t.NimanDragger)}(this);